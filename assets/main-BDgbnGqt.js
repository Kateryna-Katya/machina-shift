(function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))r(e);new MutationObserver(e=>{for(const i of e)if(i.type==="childList")for(const c of i.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(e){const i={};return e.integrity&&(i.integrity=e.integrity),e.referrerPolicy&&(i.referrerPolicy=e.referrerPolicy),e.crossOrigin==="use-credentials"?i.credentials="include":e.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(e){if(e.ep)return;e.ep=!0;const i=n(e);fetch(e.href,i)}})();document.addEventListener("DOMContentLoaded",()=>{console.log("DOM Loaded. Initializing Machina Shift..."),g(),p(),h(),E(),y(),w(),x(),b()});function g(){typeof lucide<"u"&&lucide.createIcons()}function p(){if(typeof Lenis>"u")return;const t=new Lenis({duration:1.2,easing:n=>Math.min(1,1.001-Math.pow(2,-10*n)),smooth:!0});function o(n){t.raf(n),requestAnimationFrame(o)}requestAnimationFrame(o)}function h(){const t=document.querySelector(".header__burger"),o=document.querySelector(".mobile-menu__close"),n=document.querySelector(".mobile-menu"),r=document.querySelectorAll(".mobile-menu__link, .mobile-menu__btn");if(!t||!n)return;const e=()=>{n.classList.toggle("is-open"),document.body.style.overflow=n.classList.contains("is-open")?"hidden":""};t.addEventListener("click",i=>{i.stopPropagation(),e()}),o&&o.addEventListener("click",e),r.forEach(i=>i.addEventListener("click",e))}function E(){const t=document.getElementById("canvas-container");if(!(!t||typeof THREE>"u"))try{let d=function(){requestAnimationFrame(d),a.uTime.value=v.getElapsedTime(),s.x+=(u.x-s.x)*.08,s.y+=(u.y-s.y)*.08,e.render(n,r)};var o=d;const n=new THREE.Scene,r=new THREE.OrthographicCamera(-1,1,1,-1,0,1),e=new THREE.WebGLRenderer({alpha:!0,antialias:!0});e.setSize(window.innerWidth,window.innerHeight),e.setPixelRatio(Math.min(window.devicePixelRatio,2)),t.appendChild(e.domElement);const i=new THREE.TextureLoader;i.setCrossOrigin("anonymous");const l=i.load("https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop",()=>{},void 0,()=>console.log("Texture err")),s=new THREE.Vector2(0,0),u=new THREE.Vector2(0,0),a={uTime:{value:0},uTexture:{value:l},uMouse:{value:s},uResolution:{value:new THREE.Vector2(window.innerWidth,window.innerHeight)}},f=new THREE.ShaderMaterial({uniforms:a,vertexShader:"varying vec2 vUv; void main() { vUv = uv; gl_Position = vec4(position, 1.0); }",fragmentShader:`
              uniform float uTime;
              uniform sampler2D uTexture;
              uniform vec2 uMouse;
              uniform vec2 uResolution;
              varying vec2 vUv;
              void main() {
                  vec2 uv = vUv;
                  float aspect = uResolution.x / uResolution.y;
                  vec2 m = uMouse; m.x *= aspect;
                  vec2 uva = uv; uva.x *= aspect;
                  float dist = distance(uva, m);
                  float influence = smoothstep(0.45, 0.0, dist);
                  uv.x += influence * (uv.x - uMouse.x) * 0.2;
                  uv.y += influence * (uv.y - uMouse.y) * 0.2;
                  vec4 color = texture2D(uTexture, uv);
                  color.rgb *= 0.35;
                  color.rgb += vec3(influence * 0.2, influence * 0.4, 0.0);
                  gl_FragColor = color;
              }
          `});n.add(new THREE.Mesh(new THREE.PlaneGeometry(2,2),f)),document.addEventListener("mousemove",m=>{u.x=m.clientX/window.innerWidth,u.y=1-m.clientY/window.innerHeight}),window.addEventListener("resize",()=>{e.setSize(window.innerWidth,window.innerHeight),a.uResolution.value.x=window.innerWidth,a.uResolution.value.y=window.innerHeight});const v=new THREE.Clock;d()}catch(n){console.error(n)}}function y(){const t=document.querySelector(".stats-grid"),o=document.querySelectorAll(".stat-number");let n=!1;if(!t||!o.length)return;new IntersectionObserver(e=>{e[0].isIntersecting&&!n&&(n=!0,o.forEach(i=>{const c=parseFloat(i.getAttribute("data-target")),l=c%1!==0;let s=0;const u=c/50,a=setInterval(()=>{s+=u,s>=c&&(s=c,clearInterval(a)),i.innerText=l?s.toFixed(1):Math.round(s)},30)}))},{threshold:.5}).observe(t)}function w(){document.querySelectorAll(".accordion-header").forEach(t=>{t.addEventListener("click",()=>{const o=t.classList.contains("active");document.querySelectorAll(".accordion-header").forEach(n=>{n.classList.remove("active"),n.nextElementSibling.style.maxHeight=null}),o||(t.classList.add("active"),t.nextElementSibling.style.maxHeight=t.nextElementSibling.scrollHeight+"px")})})}function x(){const t=document.getElementById("lead-form"),o=document.getElementById("form-message");t&&t.addEventListener("submit",n=>{if(n.preventDefault(),document.getElementById("captcha").value!="8"){o.textContent="Ошибка: 5 + 3 = 8",o.className="form-message error";return}const r=t.querySelector("button"),e=r.textContent;r.textContent="...",r.disabled=!0,setTimeout(()=>{o.textContent="Отправлено!",o.className="form-message success",t.reset(),r.textContent=e,r.disabled=!1},1500)})}function b(){const t=document.getElementById("cookie-popup"),o=document.getElementById("accept-cookies"),n="machina_cookie_v3";!t||!o||(localStorage.getItem(n)||setTimeout(()=>{t.classList.add("show"),console.log("Popup Triggered")},1500),o.addEventListener("click",()=>{localStorage.setItem(n,"true"),t.classList.remove("show")}))}
//# sourceMappingURL=main-BDgbnGqt.js.map
