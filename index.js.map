{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    console.log('DOM Loaded. Initializing Machina Shift...');\n\n    // 1. Инициализация иконок (Lucide)\n    initIcons();\n\n    // 2. Плавный скролл (Lenis)\n    initSmoothScroll();\n\n    // 3. Мобильное меню\n    initMobileMenu();\n\n    // 4. Анимация Hero (Three.js Fluid Distortion)\n    initHeroAnimation();\n\n    // 5. Аккордеон (Секция Обучения)\n    initAccordion();\n\n    // 6. Форма контактов\n    initForm();\n\n    // 7. Cookie Popup\n    initCookies();\n});\n\n/* =========================================\n   1. ICONS\n   ========================================= */\nfunction initIcons() {\n    try {\n        if (typeof lucide !== 'undefined') {\n            lucide.createIcons();\n            console.log('Icons initialized');\n        } else {\n            console.warn('Lucide library not found');\n        }\n    } catch (e) {\n        console.error('Icons Error:', e);\n    }\n}\n\n/* =========================================\n   2. SMOOTH SCROLL (Lenis)\n   ========================================= */\nfunction initSmoothScroll() {\n    try {\n        if (typeof Lenis === 'undefined') return;\n\n        const lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            direction: 'vertical',\n            smooth: true,\n        });\n\n        function raf(time) {\n            lenis.raf(time);\n            requestAnimationFrame(raf);\n        }\n        requestAnimationFrame(raf);\n        console.log('Smooth Scroll initialized');\n    } catch (e) {\n        console.error('Lenis Error:', e);\n    }\n}\n\n/* =========================================\n   3. MOBILE MENU\n   ========================================= */\nfunction initMobileMenu() {\n    try {\n        const burger = document.querySelector('.header__burger');\n        const closeBtn = document.querySelector('.mobile-menu__close');\n        const mobileMenu = document.querySelector('.mobile-menu');\n        const mobileLinks = document.querySelectorAll('.mobile-menu__link, .mobile-menu__btn');\n\n        if (!burger || !mobileMenu) {\n            console.warn('Mobile menu elements missing');\n            return;\n        }\n\n        const toggleMenu = () => {\n            mobileMenu.classList.toggle('is-open');\n            // Блокируем скролл страницы, когда меню открыто\n            document.body.style.overflow = mobileMenu.classList.contains('is-open') ? 'hidden' : '';\n        };\n\n        burger.addEventListener('click', (e) => {\n            e.stopPropagation();\n            toggleMenu();\n        });\n\n        if (closeBtn) {\n            closeBtn.addEventListener('click', toggleMenu);\n        }\n\n        // Закрываем меню при клике на ссылку\n        mobileLinks.forEach(link => {\n            link.addEventListener('click', toggleMenu);\n        });\n        \n        console.log('Mobile Menu initialized');\n\n    } catch (e) {\n        console.error('Mobile Menu Error:', e);\n    }\n}\n\n/* =========================================\n   4. HERO ANIMATION (Three.js)\n   ========================================= */\nfunction initHeroAnimation() {\n    const container = document.getElementById('canvas-container');\n\n    if (!container) return;\n    if (typeof THREE === 'undefined') {\n        console.error('Three.js not loaded');\n        return;\n    }\n\n    try {\n        const scene = new THREE.Scene();\n        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n        \n        renderer.setSize(window.innerWidth, window.innerHeight);\n        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        container.appendChild(renderer.domElement);\n\n        // Загрузка текстуры\n        const loader = new THREE.TextureLoader();\n        loader.setCrossOrigin('anonymous');\n        \n        // Абстрактное темное изображение для фона\n        const imgUrl = 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop';\n        \n        const texture = loader.load(imgUrl, \n            () => {}, // Success\n            undefined, // Progress\n            () => { console.warn('Texture load failed, using fallback color'); } // Error\n        );\n\n        const mouse = new THREE.Vector2(0, 0);\n        const targetMouse = new THREE.Vector2(0, 0);\n        \n        const uniforms = {\n            uTime: { value: 0 },\n            uTexture: { value: texture },\n            uMouse: { value: mouse },\n            uResolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }\n        };\n\n        // Shader Code\n        const material = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: `\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = vec4(position, 1.0);\n                }\n            `,\n            fragmentShader: `\n                uniform float uTime;\n                uniform sampler2D uTexture;\n                uniform vec2 uMouse;\n                uniform vec2 uResolution;\n                varying vec2 vUv;\n\n                void main() {\n                    vec2 uv = vUv;\n                    float aspect = uResolution.x / uResolution.y;\n                    \n                    vec2 mousePoint = uMouse;\n                    mousePoint.x *= aspect;\n                    \n                    vec2 uvAspect = uv;\n                    uvAspect.x *= aspect;\n                    \n                    float dist = distance(uvAspect, mousePoint);\n                    \n                    // Эффект жидкости (искажение)\n                    float influence = smoothstep(0.45, 0.0, dist);\n                    \n                    uv.x += influence * (uv.x - uMouse.x) * 0.2; \n                    uv.y += influence * (uv.y - uMouse.y) * 0.2;\n\n                    vec4 color = texture2D(uTexture, uv);\n                    \n                    // Затемнение фона для читаемости текста\n                    color.rgb *= 0.3; \n                    \n                    // Неоновый зеленый тинт при наведении\n                    color.rgb += vec3(influence * 0.15, influence * 0.3, 0.0);\n\n                    gl_FragColor = color;\n                }\n            `\n        });\n\n        const geometry = new THREE.PlaneGeometry(2, 2);\n        const plane = new THREE.Mesh(geometry, material);\n        scene.add(plane);\n\n        // Отслеживание мыши\n        document.addEventListener('mousemove', (e) => {\n            targetMouse.x = e.clientX / window.innerWidth;\n            targetMouse.y = 1.0 - (e.clientY / window.innerHeight);\n        });\n\n        // Ресайз окна\n        window.addEventListener('resize', () => {\n            const width = window.innerWidth;\n            const height = window.innerHeight;\n            renderer.setSize(width, height);\n            uniforms.uResolution.value.x = width;\n            uniforms.uResolution.value.y = height;\n        });\n\n        // Анимационный цикл\n        const clock = new THREE.Clock();\n        function animate() {\n            requestAnimationFrame(animate);\n            \n            const elapsedTime = clock.getElapsedTime();\n            uniforms.uTime.value = elapsedTime;\n\n            // Плавное движение (Lerp)\n            mouse.x += (targetMouse.x - mouse.x) * 0.08;\n            mouse.y += (targetMouse.y - mouse.y) * 0.08;\n\n            renderer.render(scene, camera);\n        }\n        animate();\n        console.log('Hero Animation initialized');\n\n    } catch (e) {\n        console.error('Three.js Error:', e);\n    }\n}\n\n/* =========================================\n   5. ACCORDION (Education Section)\n   ========================================= */\nfunction initAccordion() {\n    const headers = document.querySelectorAll('.accordion-header');\n    \n    if (headers.length === 0) return;\n\n    headers.forEach(header => {\n        header.addEventListener('click', () => {\n            const item = header.parentElement;\n            const body = item.querySelector('.accordion-body');\n            const isOpen = header.classList.contains('active');\n\n            // Закрываем все остальные\n            document.querySelectorAll('.accordion-header').forEach(h => {\n                h.classList.remove('active');\n                h.setAttribute('aria-expanded', 'false');\n                if(h.nextElementSibling) {\n                    h.nextElementSibling.style.maxHeight = null;\n                }\n            });\n\n            // Если не был открыт — открываем текущий\n            if (!isOpen) {\n                header.classList.add('active');\n                header.setAttribute('aria-expanded', 'true');\n                body.style.maxHeight = body.scrollHeight + \"px\";\n            }\n        });\n    });\n    console.log('Accordion initialized');\n}\n\n/* =========================================\n   6. CONTACT FORM\n   ========================================= */\nfunction initForm() {\n    const form = document.getElementById('lead-form');\n    const msgBox = document.getElementById('form-message');\n\n    if (!form) return;\n\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        \n        // 1. Проверка капчи (5 + 3)\n        const captchaInput = document.getElementById('captcha');\n        const captchaVal = captchaInput ? captchaInput.value : '';\n        \n        if (parseInt(captchaVal) !== 8) {\n            msgBox.textContent = 'Ошибка: неверное решение примера (5 + 3 = 8).';\n            msgBox.className = 'form-message error';\n            return;\n        }\n\n        // 2. Имитация отправки\n        const btn = form.querySelector('button[type=\"submit\"]');\n        const originalText = btn.textContent;\n        \n        btn.textContent = 'Обработка...';\n        btn.disabled = true;\n        btn.style.opacity = '0.7';\n\n        setTimeout(() => {\n            // Успех\n            msgBox.textContent = 'Успешно! Мы свяжемся с вами в ближайшее время.';\n            msgBox.className = 'form-message success';\n            form.reset();\n            \n            btn.textContent = originalText;\n            btn.disabled = false;\n            btn.style.opacity = '1';\n            \n            // Скрыть сообщение через 5 сек\n            setTimeout(() => {\n                msgBox.textContent = '';\n                msgBox.className = 'form-message';\n            }, 5000);\n        }, 1500);\n    });\n    console.log('Form initialized');\n}\n\n/* =========================================\n   7. COOKIE POPUP\n   ========================================= */\nfunction initCookies() {\n    const popup = document.getElementById('cookie-popup');\n    const btn = document.getElementById('accept-cookies');\n\n    if (!popup || !btn) return;\n\n    // Проверка LocalStorage\n    if (!localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            popup.classList.add('show');\n        }, 2000); // Показать через 2 секунды\n    }\n\n    btn.addEventListener('click', () => {\n        localStorage.setItem('cookiesAccepted', 'true');\n        popup.classList.remove('show');\n    });\n    console.log('Cookies initialized');\n}"],"names":["initIcons","initSmoothScroll","initMobileMenu","initHeroAnimation","initAccordion","initForm","initCookies","e","raf","time","lenis","t","burger","closeBtn","mobileMenu","mobileLinks","toggleMenu","link","container","animate","elapsedTime","clock","uniforms","mouse","targetMouse","renderer","scene","camera","loader","texture","material","geometry","plane","width","height","headers","header","body","isOpen","h","form","msgBox","captchaInput","captchaVal","btn","originalText","popup"],"mappings":"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"}