{"version":3,"file":"index.js","sources":["../src/main.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', () => {\n    console.log('DOM Loaded. Initializing Machina Shift...');\n\n    // 1. Иконки\n    initIcons();\n\n    // 2. Плавный скролл\n    initSmoothScroll();\n\n    // 3. Мобильное меню\n    initMobileMenu();\n\n    // 4. Анимация Hero (Жидкость)\n    initHeroAnimation();\n\n    // 5. Статистика (Цифры) — НОВОЕ\n    initStats();\n\n    // 6. Аккордеон\n    initAccordion();\n\n    // 7. Форма\n    initForm();\n\n    // 8. Cookies\n    initCookies();\n});\n\n/* =========================================\n   1. ICONS (LUCIDE)\n   ========================================= */\nfunction initIcons() {\n    try {\n        if (typeof lucide !== 'undefined') {\n            lucide.createIcons();\n        } else {\n            console.warn('Lucide library not found');\n        }\n    } catch (e) {\n        console.error('Icons Error:', e);\n    }\n}\n\n/* =========================================\n   2. SMOOTH SCROLL (LENIS)\n   ========================================= */\nfunction initSmoothScroll() {\n    try {\n        if (typeof Lenis === 'undefined') return;\n\n        const lenis = new Lenis({\n            duration: 1.2,\n            easing: (t) => Math.min(1, 1.001 - Math.pow(2, -10 * t)),\n            direction: 'vertical',\n            smooth: true,\n        });\n\n        function raf(time) {\n            lenis.raf(time);\n            requestAnimationFrame(raf);\n        }\n        requestAnimationFrame(raf);\n    } catch (e) {\n        console.error('Lenis Error:', e);\n    }\n}\n\n/* =========================================\n   3. MOBILE MENU\n   ========================================= */\nfunction initMobileMenu() {\n    try {\n        const burger = document.querySelector('.header__burger');\n        const closeBtn = document.querySelector('.mobile-menu__close');\n        const mobileMenu = document.querySelector('.mobile-menu');\n        const mobileLinks = document.querySelectorAll('.mobile-menu__link, .mobile-menu__btn');\n\n        if (!burger || !mobileMenu) return;\n\n        const toggleMenu = () => {\n            mobileMenu.classList.toggle('is-open');\n            document.body.style.overflow = mobileMenu.classList.contains('is-open') ? 'hidden' : '';\n        };\n\n        burger.addEventListener('click', (e) => {\n            e.stopPropagation();\n            toggleMenu();\n        });\n\n        if (closeBtn) {\n            closeBtn.addEventListener('click', toggleMenu);\n        }\n\n        mobileLinks.forEach(link => {\n            link.addEventListener('click', toggleMenu);\n        });\n\n    } catch (e) {\n        console.error('Mobile Menu Error:', e);\n    }\n}\n\n/* =========================================\n   4. HERO ANIMATION (THREE.JS)\n   ========================================= */\nfunction initHeroAnimation() {\n    const container = document.getElementById('canvas-container');\n\n    if (!container) return;\n    if (typeof THREE === 'undefined') {\n        console.error('Three.js not loaded');\n        return;\n    }\n\n    try {\n        const scene = new THREE.Scene();\n        const camera = new THREE.OrthographicCamera(-1, 1, 1, -1, 0, 1);\n        const renderer = new THREE.WebGLRenderer({ alpha: true, antialias: true });\n        \n        renderer.setSize(window.innerWidth, window.innerHeight);\n        renderer.setPixelRatio(Math.min(window.devicePixelRatio, 2));\n        container.appendChild(renderer.domElement);\n\n        const loader = new THREE.TextureLoader();\n        loader.setCrossOrigin('anonymous');\n        \n        // Темное абстрактное изображение\n        const imgUrl = 'https://images.unsplash.com/photo-1618005182384-a83a8bd57fbe?q=80&w=2564&auto=format&fit=crop';\n        \n        const texture = loader.load(imgUrl, \n            () => {}, \n            undefined, \n            () => console.warn('Texture failed to load')\n        );\n\n        const mouse = new THREE.Vector2(0, 0);\n        const targetMouse = new THREE.Vector2(0, 0);\n        \n        const uniforms = {\n            uTime: { value: 0 },\n            uTexture: { value: texture },\n            uMouse: { value: mouse },\n            uResolution: { value: new THREE.Vector2(window.innerWidth, window.innerHeight) }\n        };\n\n        const material = new THREE.ShaderMaterial({\n            uniforms: uniforms,\n            vertexShader: `\n                varying vec2 vUv;\n                void main() {\n                    vUv = uv;\n                    gl_Position = vec4(position, 1.0);\n                }\n            `,\n            fragmentShader: `\n                uniform float uTime;\n                uniform sampler2D uTexture;\n                uniform vec2 uMouse;\n                uniform vec2 uResolution;\n                varying vec2 vUv;\n\n                void main() {\n                    vec2 uv = vUv;\n                    float aspect = uResolution.x / uResolution.y;\n                    \n                    vec2 mousePoint = uMouse;\n                    mousePoint.x *= aspect;\n                    \n                    vec2 uvAspect = uv;\n                    uvAspect.x *= aspect;\n                    \n                    float dist = distance(uvAspect, mousePoint);\n                    float influence = smoothstep(0.45, 0.0, dist);\n                    \n                    uv.x += influence * (uv.x - uMouse.x) * 0.2; \n                    uv.y += influence * (uv.y - uMouse.y) * 0.2;\n\n                    vec4 color = texture2D(uTexture, uv);\n                    color.rgb *= 0.3; // Darken\n                    color.rgb += vec3(influence * 0.15, influence * 0.3, 0.0); // Neon tint\n\n                    gl_FragColor = color;\n                }\n            `\n        });\n\n        const geometry = new THREE.PlaneGeometry(2, 2);\n        const plane = new THREE.Mesh(geometry, material);\n        scene.add(plane);\n\n        document.addEventListener('mousemove', (e) => {\n            targetMouse.x = e.clientX / window.innerWidth;\n            targetMouse.y = 1.0 - (e.clientY / window.innerHeight);\n        });\n\n        window.addEventListener('resize', () => {\n            const width = window.innerWidth;\n            const height = window.innerHeight;\n            renderer.setSize(width, height);\n            uniforms.uResolution.value.x = width;\n            uniforms.uResolution.value.y = height;\n        });\n\n        const clock = new THREE.Clock();\n        function animate() {\n            requestAnimationFrame(animate);\n            const elapsedTime = clock.getElapsedTime();\n            uniforms.uTime.value = elapsedTime;\n            mouse.x += (targetMouse.x - mouse.x) * 0.08;\n            mouse.y += (targetMouse.y - mouse.y) * 0.08;\n            renderer.render(scene, camera);\n        }\n        animate();\n\n    } catch (e) {\n        console.error('Three.js Error:', e);\n    }\n}\n\n/* =========================================\n   5. STATS ANIMATION (НОВОЕ)\n   ========================================= */\nfunction initStats() {\n    const statsSection = document.querySelector('.stats-grid');\n    const numbers = document.querySelectorAll('.stat-number');\n    let started = false;\n\n    if (!statsSection || numbers.length === 0) return;\n\n    const observer = new IntersectionObserver((entries) => {\n        entries.forEach(entry => {\n            if (entry.isIntersecting && !started) {\n                started = true;\n                \n                numbers.forEach(num => {\n                    const target = parseFloat(num.getAttribute('data-target'));\n                    const isFloat = target % 1 !== 0; \n                    const duration = 2000; // 2 sec\n                    const stepTime = 20;\n                    const steps = duration / stepTime;\n                    const increment = target / steps;\n                    let current = 0;\n\n                    const timer = setInterval(() => {\n                        current += increment;\n                        if (current >= target) {\n                            current = target;\n                            clearInterval(timer);\n                        }\n                        num.innerText = isFloat ? current.toFixed(1) : Math.round(current);\n                    }, stepTime);\n                });\n            }\n        });\n    }, { threshold: 0.5 });\n\n    observer.observe(statsSection);\n}\n\n/* =========================================\n   6. ACCORDION\n   ========================================= */\nfunction initAccordion() {\n    const headers = document.querySelectorAll('.accordion-header');\n    \n    headers.forEach(header => {\n        header.addEventListener('click', () => {\n            const item = header.parentElement;\n            const body = item.querySelector('.accordion-body');\n            const isOpen = header.classList.contains('active');\n\n            // Close others\n            document.querySelectorAll('.accordion-header').forEach(h => {\n                h.classList.remove('active');\n                h.setAttribute('aria-expanded', 'false');\n                if(h.nextElementSibling) h.nextElementSibling.style.maxHeight = null;\n            });\n\n            // Open current\n            if (!isOpen) {\n                header.classList.add('active');\n                header.setAttribute('aria-expanded', 'true');\n                body.style.maxHeight = body.scrollHeight + \"px\";\n            }\n        });\n    });\n}\n\n/* =========================================\n   7. CONTACT FORM\n   ========================================= */\nfunction initForm() {\n    const form = document.getElementById('lead-form');\n    const msgBox = document.getElementById('form-message');\n\n    if (!form) return;\n\n    form.addEventListener('submit', (e) => {\n        e.preventDefault();\n        \n        // Captcha validation\n        const captchaInput = document.getElementById('captcha');\n        if (parseInt(captchaInput.value) !== 8) {\n            msgBox.textContent = 'Ошибка: неверное решение (5 + 3 = 8).';\n            msgBox.className = 'form-message error';\n            return;\n        }\n\n        const btn = form.querySelector('button[type=\"submit\"]');\n        const originalText = btn.textContent;\n        \n        btn.textContent = 'Отправка...';\n        btn.disabled = true;\n\n        setTimeout(() => {\n            msgBox.textContent = 'Успешно! Мы свяжемся с вами.';\n            msgBox.className = 'form-message success';\n            form.reset();\n            btn.textContent = originalText;\n            btn.disabled = false;\n            \n            setTimeout(() => {\n                msgBox.textContent = '';\n                msgBox.className = 'form-message';\n            }, 5000);\n        }, 1500);\n    });\n}\n\n/* =========================================\n   8. COOKIE POPUP\n   ========================================= */\nfunction initCookies() {\n    const popup = document.getElementById('cookie-popup');\n    const btn = document.getElementById('accept-cookies');\n\n    if (!popup || !btn) return;\n\n    if (!localStorage.getItem('cookiesAccepted')) {\n        setTimeout(() => {\n            popup.classList.add('show');\n        }, 2000);\n    }\n\n    btn.addEventListener('click', () => {\n        localStorage.setItem('cookiesAccepted', 'true');\n        popup.classList.remove('show');\n    });\n}"],"names":["initIcons","initSmoothScroll","initMobileMenu","initHeroAnimation","initStats","initAccordion","initForm","initCookies","e","raf","time","lenis","t","burger","closeBtn","mobileMenu","mobileLinks","toggleMenu","link","container","animate","elapsedTime","clock","uniforms","mouse","targetMouse","renderer","scene","camera","loader","texture","material","geometry","plane","width","height","statsSection","numbers","started","entries","entry","num","target","isFloat","duration","stepTime","steps","increment","current","timer","header","body","isOpen","h","form","msgBox","captchaInput","btn","originalText","popup"],"mappings":"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"}